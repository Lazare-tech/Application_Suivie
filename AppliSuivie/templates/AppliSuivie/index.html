{% extends "base.html" %}
    
{% block title %}Tableau de Bord - FinanceManager{% endblock title %}
   
{% block content %}

<!-- Header -->
<div class="page-header">
    <div class="container-fluid px-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="h2 mb-1">
                    <i class="fas fa-chart-bar me-2"></i>
                    Tableau de Bord
                </h1>
                <p class="text-white-50 mb-0">Vue d'ensemble de votre situation financière</p>
            </div>
            <div class="col-auto">
                <select class="form-select form-select-sm bg-white bg-opacity-10 border-white border-opacity-20 text-white me-2" style="width: auto; display: inline-block;">
                    <option>30 derniers jours</option>
                    <option>7 derniers jours</option>
                    <option>90 derniers jours</option>
                    <option>1 an</option>
                </select>
                <button class="btn btn-outline-light btn-sm">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Dashboard Content -->
<div class="container-fluid px-4">
    <!-- Key Metrics -->
    <div class="row mb-4">
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card stat-card border-0 shadow">
                <div class="card-body p-4">
                    <div class="d-flex align-items-start justify-content-between">
                        <div>
                            <p class="text-muted small mb-2">Trésorerie Totale</p>
                            <h6 class="text-success fw-bold mb-1">635,750 <span class="fs-6 text-muted">FCFA</span>
                            </h6>
                            <div class="d-flex align-items-center text-success small">
                                <i class="fas fa-arrow-up me-1"></i>
                                +12.5%
                            </div>
                        </div>
                        <div class="bg-success bg-opacity-10 rounded-circle p-3">
                            <i class="fas fa-wallet text-success"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card stat-card border-0 shadow">
                <div class="card-body p-4">
                    <div class="d-flex align-items-start justify-content-between">
                        <div>
                            <p class="text-muted small mb-2">Chiffre d'Affaires</p>
                            <h6 class="text-primary fw-bold mb-1">1,245,000 <span class="fs-6 text-muted">FCFA</span>
                            </h6>
                            <div class="d-flex align-items-center text-success small">
                                <i class="fas fa-arrow-up me-1"></i>
                                +8.3%
                            </div>
                        </div>
                        <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                            <i class="fas fa-chart-line text-primary"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card stat-card border-0 shadow">
                <div class="card-body p-4">
                    <div class="d-flex align-items-start justify-content-between">
                        <div>
                            <p class="text-muted small mb-2">Résultat Net</p>
                            <h6 class="text-success fw-bold mb-1">185,250 <span class="fs-6 text-muted">FCFA</span></h6>
                            <div class="d-flex align-items-center text-success small">
                                <i class="fas fa-arrow-up me-1"></i>
                                +15.2%
                            </div>
                        </div>
                        <div class="bg-success bg-opacity-10 rounded-circle p-3">
                            <i class="fas fa-chart-pie text-success"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

      

        <!-- ROE -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card stat-card border-0 shadow">
                <div class="card-body p-4">
                    <div class="d-flex align-items-start justify-content-between">
                        <div>
                            <p class="text-muted small mb-2">ROE</p>
                            <h6 class="text-info fw-bold mb-1">14.2%</h6>
                            <div class="d-flex align-items-center text-success small">
                                <i class="fas fa-arrow-up me-1"></i>
                                +1.5 pts
                            </div>
                        </div>
                        <div class="bg-info bg-opacity-10 rounded-circle p-3">
                            <i class="fas fa-percentage text-info"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ROE -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card stat-card border-0 shadow">
                <div class="card-body p-4">
                    <div class="d-flex align-items-start justify-content-between">
                        <div>
                            <p class="text-muted small mb-2">ROA</p>
                            <h6 class="text-info fw-bold mb-1">14.2%</h6>
                            <div class="d-flex align-items-center text-success small">
                                <i class="fas fa-arrow-up me-1"></i>
                                +1.5 pts
                            </div>
                        </div>
                        <div class="bg-info bg-opacity-10 rounded-circle p-3">
                            <i class="fas fa-percentage text-info"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Marge Brute -->
        <div class="col-md-6 col-lg-3 mb-3">
            <div class="card stat-card border-0 shadow">
                <div class="card-body p-4">
                    <div class="d-flex align-items-start justify-content-between">
                        <div>
                            <p class="text-muted small mb-2">Marge Nette</p>
                            <h6 class="text-primary fw-bold mb-1">62.5%</h6>
                            <div class="d-flex align-items-center text-success small">
                                <i class="fas fa-arrow-up me-1"></i>
                                +2.1 pts
                            </div>
                        </div>
                        <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                            <i class="fas fa-balance-scale text-primary"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
    </div>

    <!-- Charts Row -->
    <div class="row mb-4">
        <div class="col-lg-8 mb-3">
            <div class="card border-0 shadow">
                <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-chart-line me-2"></i>
                        Évolution de la Trésorerie
                    </h5>
                    <div class="btn-group btn-group-sm">
                        <button class="btn btn-outline-secondary">7J</button>
                        <button class="btn btn-primary">30J</button>
                        <button class="btn btn-outline-secondary">90J</button>
                        <button class="btn btn-outline-secondary">1A</button>
                    </div>
                </div>
                <div class="card-body">
                    <canvas id="treasuryChart" height="300"></canvas>
                </div>
            </div>
        </div>

        <div class="col-lg-4 mb-3">
            <div class="card border-0 shadow">
                <div class="card-header bg-white border-0">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-chart-pie me-2"></i>
                        Répartition des Dépenses
                    </h5>
                </div>
                <div class="card-body">
                    <canvas id="expenseChart" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Alerts and Transactions Row -->
    <div class="row">
        <div class="col-lg-6 mb-3">
            <div class="card border-0 shadow">
                <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-exclamation-triangle text-danger me-2"></i>
                        Alertes Critiques
                    </h5>
                    <a href="{% url 'AppliSuivie:alert'%}" class="btn btn-outline-secondary btn-sm">Voir tout</a>
                </div>
               <div class="card-body p-0">
                        
                                <!-- Alerte Solde Critique -->
                                <div class="alert-item alert-critical p-4 border-bottom">
                                    <div class="d-flex align-items-start justify-content-between">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-exclamation-triangle text-danger fa-lg me-3 mt-1"></i>
                                            <div>
                                                <h6 class="fw-semibold mb-1">Solde critique - Compte Caisse</h6>
                                                <p class="text-muted small mb-2">Solde inférieur à 1 mois de charges fixes (Seuil: 2 500 000 FCFA)</p>
                                                <div class="small text-muted">
                                                    <i class="fas fa-clock me-1"></i>Il y a 1h — Compte: CAISSE-003
                                                </div>
                                            </div>
                                        </div>
                                       
                                    </div>
                                </div>
                        
                                <!-- Résultat Net Négatif -->
                                <div class="alert-item alert-critical p-4 border-bottom">
                                    <div class="d-flex align-items-start justify-content-between">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-exclamation-triangle text-danger fa-lg me-3 mt-1"></i>
                                            <div>
                                                <h6 class="fw-semibold mb-1">Résultat net négatif</h6>
                                                <p class="text-muted small mb-2">Résultat net < 0 pendant 2 trimestres consécutifs</p>
                                                <div class="small text-muted">
                                                    <i class="fas fa-clock me-1"></i>Il y a 3j — Dernier trimestre: -5 200 000 FCFA
                                                </div>
                                            </div>
                                        </div>
                                      
                                    </div>
                                </div>
                                 <!-- ROE Faible -->
                                 <div class="alert-item alert-warning p-4 border-bottom">
                                    <div class="d-flex align-items-start justify-content-between">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-exclamation-circle text-warning fa-lg me-3 mt-1"></i>
                                            <div>
                                                <h6 class="fw-semibold mb-1">ROE en dessous du seuil</h6>
                                                <p class="text-muted small mb-2">ROE actuel : 7% (< 10% requis)</p>
                                                <div class="small text-muted">
                                                    <i class="fas fa-clock me-1"></i>Il y a 5j — Fonds propres : 85 000 000 FCFA
                                                </div>
                                            </div>
                                        </div>
                                      
                                    </div>
                                </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6 mb-3">
            <div class="card border-0 shadow">
                <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-exchange-alt me-2"></i>
                        Transactions Récentes
                    </h5>
                    <a href="{% url 'AppliSuivie:transaction' %}" class="btn btn-outline-secondary btn-sm">Voir tout</a>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                        <div>
                            <h6 class="fw-semibold small mb-0">Virement client ABC Corp</h6>
                            <small class="text-muted">15/12/2024</small>
                        </div>
                        <div class="text-end">
                            <span class="text-success fw-bold">+25,000 FCFA</span>
                            <br>
                            <span class="badge bg-success small">Validé</span>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                        <div>
                            <h6 class="fw-semibold small mb-0">Règlement facture client</h6>
                            <small class="text-muted">12/12/2025</small>
                        </div>
                        <div class="text-end">
                            <span class="text-danger fw-bold">-350,000 FCFA</span>
                            <br>
                            <span class="badge bg-success small">Validé</span>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                        <div>
                            <h6 class="fw-semibold small mb-0">Paiement facture électricité </h6>
                            <small class="text-muted">14/12/2025</small>
                        </div>
                        <div class="text-end">
                            <span class="text-danger fw-bold">- 120,000 FCFA</span>
                            <br>
                            <span class="badge bg-warning small">En attente</span>
                        </div>
                    </div>
                  
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}
